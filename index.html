<!DOCTYPE html> 
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <title>Gebedstijden - Den Haag</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- ARAPÇA KUR’AN HATTI FONTS -->
  
  <link href="https://fonts.googleapis.com/css2?family=Amiri+Quran&display=swap" rel="stylesheet">

  <style>
    
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: "Segoe UI", system-ui, Arial, sans-serif;
      background: radial-gradient(circle at top, #141b3a 0%, #040614 55%, #02030a 100%);
      color: #ffffff;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      overflow-x: hidden;
    }

    .container {
      width: 100%;
      max-width: 1400px;
      padding: 24px;
      display: flex;
      flex-direction: column;
      gap: 22px;
    }

    /* ------------------ BİSMİLLAH ------------------ */

    .bismillah {
      margin-top: 8px;
      text-align: center;
      font-family: "Amiri Quran", serif;
      font-size: 2.9rem;
      color: #21e6b8;
      font-weight: 400;
      letter-spacing: 1px;
      text-shadow:
        0 0 6px rgba(33,230,184,0.9),
        0 0 14px rgba(33,230,184,0.7),
        0 0 30px rgba(0,0,0,0.8);
    }

    /* TOP BAR */
    
    .topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 16px;
      border-radius: 999px;
      background: rgba(0,0,0,0.35);
      border: 1px solid rgba(255,255,255,0.08);
    }
    .topbar-left { display: flex; align-items: center; gap: 10px; }
    .top-dot {
      width: 10px; height: 10px;
      border-radius: 999px;
      background: #21e6b8;
      box-shadow: 0 0 10px #21e6b8;
    }
    .top-title {
      font-size: 0.95rem;
      letter-spacing: 2px;
      text-transform: uppercase;
      opacity: 0.8;
    }
    .top-right { font-size: 0.85rem; opacity: 0.7; }

    /* HEADER */
    .header {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      flex-wrap: wrap;
      gap: 12px;
    }
    .location {
      font-size: 2.3rem;
      font-weight: 700;
      letter-spacing: 2px;
    }
    .date { opacity: 0.85; font-size: 1rem; margin-top: 4px; }
    .clock {
      font-size: 3.4rem;
      font-weight: 700;
      letter-spacing: 2px;
      text-align: right;
    }
    .tz-label { text-align: right; font-size: 0.9rem; opacity: 0.65; }

    /* LAYOUT */
    .main-layout {
      display: grid;
      grid-template-columns: minmax(0, 0.9fr) minmax(0, 1.1fr);
      gap: 22px;
    }
    @media (max-width: 900px) {
      .main-layout { grid-template-columns: 1fr; }
    }

    .left-column { display: flex; flex-direction: column; gap: 18px; }

    /* NEXT PANEL */
    .next-panel {
      flex: 1;
      background: linear-gradient(135deg, rgba(33,230,184,0.12), rgba(5,8,30,0.95));
      padding: 22px;
      border-radius: 20px;
      border: 1px solid rgba(33,230,184,0.30);
      box-shadow: 0 0 24px rgba(0,0,0,0.45);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      gap: 18px;
    }
    .next-label { opacity: 0.8; font-size: 0.9rem; letter-spacing: 2px; text-transform: uppercase; }
    .next-name { font-size: 2rem; font-weight: 700; margin-top: 4px; }
    .next-time { font-size: 1.6rem; opacity: 0.9; }
    .next-countdown { font-size: 1.2rem; opacity: 0.9; }

    .btn {
      padding: 12px 22px;
      border-radius: 999px;
      background: #21e6b8;
      color: #000;
      font-weight: 700;
      border: none;
      cursor: pointer;
      font-size: 0.95rem;
      transition: 0.2s;
    }
    .btn:hover { background: #39ffd0; }

    /* GRID */
    .grid-panel {
      background: rgba(255,255,255,0.03);
      border-radius: 20px;
      padding: 20px;
      border: 1px solid rgba(255,255,255,0.06);
      box-shadow: 0 0 18px rgba(0,0,0,0.4);
    }
    .grid-title {
      font-size: 0.95rem;
      text-transform: uppercase;
      letter-spacing: 2px;
      opacity: 0.8;
      margin-bottom: 14px;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0,1fr));
      gap: 14px;
    }
    @media (max-width: 700px) {
      .grid { grid-template-columns: repeat(2, 1fr); }
    }

    .card {
      background: radial-gradient(circle at top, rgba(255,255,255,0.10), rgba(2,3,12,0.95));
      padding: 18px;
      border-radius: 16px;
      text-align: center;
      border: 1px solid rgba(255,255,255,0.06);
      transition: 0.25s ease;
      position: relative;
    }

    .card-name {
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 2px;
      opacity: 0.85;
      margin-bottom: 8px;
    }

    .card-time {
      font-size: 1.8rem;
      font-weight: 700;
    }

    .card.highlight {
      border-color: #21e6b8;
      box-shadow: 0 0 20px rgba(33,230,184,0.75);
      transform: translateY(-3px) scale(1.03);
    }

    /* Logo */
    .logo-box {
      margin-top: 32px;
      display: flex;
      justify-content: center;
      opacity: 0.8;
    }
    .logo-box img {
      height: 130px;   /* İSTEDİĞİN KADAR BÜYÜT */
      object-fit: contain;
      filter: drop-shadow(0 0 6px rgba(0,0,0,0.5));
    }

  </style>
</head>

<body>
<div class="container">

  <!-- BİSMİLLAH -->
  <div class="bismillah">بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ</div>

  <!-- TOP BAR -->
  <div class="topbar">
    <div class="topbar-left">
      <div class="top-dot"></div>
      <div class="top-title">Gebedstijden Paneel</div>
    </div>
    <div class="top-right">AbanGroup • Den Haag</div>
  </div>

  <!-- HEADER -->
  <header class="header">
    <div>
      <div class="location">Den Haag</div>
      <div class="date" id="dateDisplay"></div>
    </div>
    <div>
      <div class="clock" id="clock">--:--:--</div>
      <div class="tz-label">Europe/Amsterdam</div>
    </div>
  </header>

  <!-- MAIN LAYOUT -->
  <section class="main-layout">

    <!-- SOL TARAF -->
    <div class="left-column">
      <div class="next-panel">
        <div>
          <div class="next-label">Volgende gebed</div>
          <div class="next-name" id="nextPrayerName">-</div>
          <div class="next-time" id="nextPrayerTime">-</div>
        </div>
        <div class="next-countdown" id="nextPrayerCountdown">-</div>
      </div>

      <button class="btn" id="playTestBtn">Ezan test / geluid inschakelen</button>
    </div>

    <!-- SAĞ TARAF -->
    <div class="grid-panel">
      <div class="grid-title">Gebedstijden vandaag</div>
      <div class="grid" id="prayerGrid"></div>
    </div>

  </section>

  <!-- LOGO -->
  <div class="logo-box">
    <img src="abanlogo.png" alt="Aban Group">
  </div>

</div>

<!-- EZAN SES DOSYASI -->
<audio id="adhanAudio" preload="auto">
  <source src="azan.mp3" type="audio/mpeg">
</audio>

<script>

/* ===========================
       KONFİG
=========================== */

const CITY     = "Den Haag";
const COUNTRY  = "Netherlands";
const METHOD   = 13;

const prayerOrder  = ["Fajr","Dhuhr","Asr","Maghrib","Isha"];
const displayOrder = ["Fajr","Sunrise","Dhuhr","Asr","Maghrib","Isha"];

const namesNL = {
  Fajr:    "Fajr / İmsak",
  Sunrise: "Shams / Güneş",
  Dhuhr:   "Dhuhr / Öğle",
  Asr:     "Asr / İkindi",
  Maghrib: "Maghrib / Akşam",
  Isha:    "Isha / Yatsı"
};

let timings      = {};
let played       = {};
let scheduleDate = null;
let adhanEnabled = false;

/* ===========================
       SAAT & TARİH
=========================== */

function updateClockAndDate() {
  const now = new Date();
  document.getElementById("clock").textContent =
    now.toLocaleTimeString("nl-NL",{hour12:false});

  const d = scheduleDate || now;
  document.getElementById("dateDisplay").textContent =
    d.toLocaleDateString("nl-NL",{weekday:"long",year:"numeric",month:"long",day:"numeric"});
}
setInterval(updateClockAndDate, 1000);

/* ===========================
       API URL
=========================== */

function buildApiUrl(date){
  const d  = date || new Date();
  const dd = String(d.getDate()).padStart(2,"0");
  const mm = String(d.getMonth()+1).padStart(2,"0");
  const yy = d.getFullYear();
  const base = `https://api.aladhan.com/v1/timingsByCity/${dd}-${mm}-${yy}?city=${CITY}&country=${COUNTRY}&method=${METHOD}`;
  return "https://corsproxy.io/?" + encodeURIComponent(base);
}

/* ===========================
     VAKİTLERİ ÇEK
=========================== */

function fetchTimes(date){
  scheduleDate = date || new Date();

  fetch(buildApiUrl(scheduleDate))
    .then(r => r.json())
    .then(j => {
      timings = j.data.timings;
      played = {};
      buildGrid();
      updateUI();
    });
}

function buildGrid(){
  const grid = document.getElementById("prayerGrid");
  grid.innerHTML = "";

  displayOrder.forEach(k=>{
    if(!timings[k]) return;

    const t = timings[k].split(" ")[0];

    const card = document.createElement("div");
    card.className = "card";
    card.dataset.key = k;

    card.innerHTML = `
      <div class="card-name">${namesNL[k]}</div>
      <div class="card-time">${t}</div>
    `;
    grid.appendChild(card);
  });
}

/* ===========================
   SONRAKİ NAMAZ HESABI
=========================== */

function getNextPrayer(){
  const now = new Date();
  const d = scheduleDate;

  let next = null;

  prayerOrder.forEach(k=>{
    if(!timings[k]) return;

    const tStr = timings[k].split(" ")[0];
    const [h,m] = tStr.split(":").map(Number);

    const t = new Date(d.getFullYear(), d.getMonth(), d.getDate(), h, m);

    if(t > now && (!next || t < next.time)){
      next = { name: k, time: t };
    }
  });

  return next;
}

function formatDiff(ms){
  if(ms <= 0) return "Nu";
  const s = Math.floor(ms/1000);
  const m = Math.floor(s/60);
  const h = Math.floor(m/60);
  if(h > 0) return `${h} uur ${m%60} min`;
  return `${m} min ${s%60} sec`;
}

function updateUI(){
  const next = getNextPrayer();

  const nameEl = document.getElementById("nextPrayerName");
  const timeEl = document.getElementById("nextPrayerTime");
  const cdEl   = document.getElementById("nextPrayerCountdown");

  if(!next){
    nameEl.textContent = "Alle gebeden voorbij";
    timeEl.textContent = "";
    cdEl.textContent = "Nieuwe tijden worden geladen...";
    return;
  }

  nameEl.textContent = namesNL[next.name];
  timeEl.textContent = next.time.toLocaleTimeString("nl-NL",{hour:"2-digit",minute:"2-digit"});

  cdEl.textContent = formatDiff(next.time - new Date());

  document.querySelectorAll(".card").forEach(c=>c.classList.remove("highlight"));
  const active = document.querySelector(`.card[data-key="${next.name}"]`);
  if(active) active.classList.add("highlight");
}

/* ===========================
     GÜN ÇEVİRME (ISHA SONRASI)
=========================== */

function checkDayRollover(){
  if(!timings.Isha) return;

  const d = scheduleDate;
  const [h,m] = timings.Isha.split(" ")[0].split(":").map(Number);
  const ishaTime = new Date(d.getFullYear(), d.getMonth(), d.getDate(), h, m);

  const now = new Date();
  if(now > ishaTime){
    const tomorrow = new Date(d.getTime() + 24*3600*1000);
    fetchTimes(tomorrow);
  }
}

/* ===========================
     EZAN TETİĞİ
=========================== */

function playAdhan(){
  const audio = document.getElementById("adhanAudio");
  audio.currentTime = 0;
  audio.play().catch(()=>{});
}

function checkAdhan(){
  if(!adhanEnabled) return;

  const now = new Date();
  const hm = now.toLocaleTimeString("nl-NL",{hour:"2-digit",minute:"2-digit"});

  prayerOrder.forEach(k=>{
    const t = timings[k]?.split(" ")[0]?.slice(0,5);
    if(t === hm && !played[k]){
      played[k] = true;
      playAdhan();
    }
  });
}

/* ===========================
     BUTON
=========================== */

document.getElementById("playTestBtn").addEventListener("click", ()=>{
  adhanEnabled = true;
  playAdhan();
});

/* ===========================
     LOOP
=========================== */

setInterval(updateUI, 1000);
setInterval(checkAdhan, 1000);
setInterval(checkDayRollover, 5000);

/* ===========================
     START
=========================== */

fetchTimes(new Date());

</script>

</body>
</html>





















